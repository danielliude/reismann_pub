{% extends "core/__global.html" %}
{% load i18n %}
{% load render_bundle from webpack_loader %}

{% block stylesheets %}
  {% render_bundle 'cities/city' 'css' %}
{% endblock %}
{% block javascripts %}
  <script type="text/javascript">
    $.ajaxSetup({
      data: {csrfmiddlewaretoken: '{{ csrf_token }}' },
    });
  </script>
  {% render_bundle 'cities/city' 'js' %}
{% endblock %}

{% block content %}
<div class="city_img"></div>
<div class="ui segment search_form">
  <div class="ui page doubling grid">
    <div class="four wide column">
      <label>{% trans 'Service types' %}</label>
    </div>

    <div class="twelve wide column">
      <div class="ui three column grid">
        {% for field in form.services %}
        <div class="column">
          <div class="ui secondary segment">
               {{ field }}
          </div>
        </div>
        {% endfor %}
      </div>
    </div>
    <div class="four wide column">
      <label>{% trans 'Service people' %}</label>
    </div>
    <div class="twelve wide column">
      <div class="ui three column grid">
        <div class="column">
          {{ form.gender }}
        </div>
        <div class="column">
          {{ form.age }}
        </div>
      </div>
    </div>
    <div class="four wide column">
      <label>{% trans 'Service cities' %}</label>
    </div>
    <div class="twelve wide column">
      <div class="ui grid">
        <div class="column">
          {{ form.city }}
        </div>
      </div>
    </div>
    <div class="ui grid hidden_content" style="display: none;">
      <div class="four wide column hidden">
        <label>{% trans 'Service languages' %}</label>
      </div>
      <div class="twelve wide column hidden">
        <div class="ui three column grid">
          {% for field in form.languages %}
          <div class="column">
            <div class="ui secondary segment">
                 {{ field }}
            </div>
          </div>
          {% endfor %}
        </div>
      </div>
      <div class="four wide column hidden">
        <label>{% trans 'Service tags' %}</label>
      </div>
      <div class="twelve wide column hidden">
        <div class="ui three column grid">
          {% for field in form.tags %}
          <div class="column">
            <div class="ui secondary segment">
                 {{ field }}
            </div>
          </div>
          {% endfor %}
        </div>
      </div>
    </div>
  </div>
</div>
<div class="ui page grid search_button">
  <div class="row search_head" style="padding-left: 14px !important;">
    <button class="ui button more_select"> {% trans "More options" %}</button>
    <button class="ui button submit submit_button">{% trans "Search" %}</button>
    <h4 class="ui header">{% trans "Have found " %} <span class="services_num"> {{ services|length }}</span>{% trans " services" %}</h4>
  </div>
</div>
<div class="ui three column stackable doubling page grid search_profile">
  {% if services|length == 0 %}
    <h4>No result,please search again!</h4>
  {% endif %}
  {% for service in services %}
    <div class="column">
      <div class="ui segment padding">
        <a href="{% url 'profiles:service_view' service.user.username service.id %}" class="profile_map" style="background-image: url('{{ service.user.profile.get_card_image_url }}');"></a>
        <a href="{% url 'profiles:profile' service.user.username %}" class="ui tiny circular image">
          <img  src="{{ service.user.profile.get_avatar_url }}" alt="User Avatar">
        </a>
        <div class="ui segment">
          <div class="row"> 
            <div class="ui header">{{ service.user.profile.get_full_name_or_username }} {{ service.user.profile.short_description }}</div>
            </strong><a href="#">{% for city in service.cities.all %}{% if not forloop.last %}{{ city.name }} , {% else %}{{ city.name }}{% endif %} {% endfor %}</a></strong>
          </div>
          <div class="ui red header average_price">€ {{ service.price }}</div>
          <div class="row content">
            <p>{{ service.content }}</p>
          </div>
        </div>
      </div>
    </div>
  {% endfor %}
</div>

<div class="ui page grid more_loaders"{% if services|length <= 21 %} style="display:none" {% endif %}>
  <div class="row">
    <div class="ui center aligned inverted segment more_loader">加载更多</div>
  </div>
</div>

{% endblock %}


 