{% extends "core/__global.html" %}
{% load i18n %}
{% load render_bundle from webpack_loader %}

{% block stylesheets %}
  {% render_bundle 'cities/city' 'css' %}
{% endblock %}
{% block javascripts %}
  <script type="text/javascript">
    $.ajaxSetup({
      data: {csrfmiddlewaretoken: '{{ csrf_token }}' },
    });
  </script>
  {% render_bundle 'cities/city' 'js' %}
{% endblock %}

{% block content %}
<!-- <img class="ui fluid image" src="{{ banner_image.url }}"> -->
<div class="city_img" style="background-image: url('{{ banner_image.url }}');"></div>
<div class="ui segment search_form">
  <br>
  <div class="ui doubling grid container">
    <div class="sixteen wide tablet four wide computer column">
      <label><b>{% trans 'Service types' %}</b></label>
    </div>

    <div class="sixteen wide tablet twelve wide computer column">
      <div class="ui three column doubling grid">
        {% for field in form.services %}
        <div class="column">
          <div class="ui secondary segment">
               {{ field }}
          </div>
        </div>
        {% endfor %}
      </div>
    </div>
    <div class="sixteen wide tablet four wide computer column">
      <label><b>{% trans 'Service people' %}</b></label>
    </div>
    <div class="sixteen wide tablet twelve wide computer column">
      <div class="ui grid">
        <div class="eight wide column">
          {{ form.gender }}
        </div>
        <div class="eight wide column">
          {{ form.age }}
        </div>
      </div>
    </div>
    <div class="sixteen wide tablet four wide computer column">
      <label><b>{% trans 'Service cities' %}</b></label>
    </div>
    <div class="sixteen wide tablet twelve wide computer column">
      <div class="ui grid">
        <div class="column">
          {{ form.city }}
        </div>
      </div>
    </div>
    <div class="ui grid hidden_content" style="display: none;">
      <div class="sixteen wide tablet four wide computer column hidden">
        <label><b>{% trans 'Service languages' %}</b></label>
      </div>
      <div class="sixteen wide tablet twelve wide computer column hidden">
        <div class="ui three column doubling grid">
          {% for field in form.languages %}
          <div class="column">
            <div class="ui secondary segment">
                 {{ field }}
            </div>
          </div>
          {% endfor %}
        </div>
      </div>
      <div class="sixteen wide tablet four wide computer column hidden">
        <label><b>{% trans 'Service tags' %}</b></label>
      </div>
      <div class="sixteen wide tablet twelve wide computer column hidden">
        <div class="ui three column doubling grid">
          {% for field in form.tags %}
          <div class="column">
            <div class="ui secondary segment">
                 {{ field }}
            </div>
          </div>
          {% endfor %}
        </div>
      </div>
    </div>
  </div>
  <br>
</div>
<div class="ui grid container search_button">
  <div class="row search_head" style="padding-left: 14px !important;">
    <button class="ui primary button more_select"> {% trans "More options" %}</button>
    <button class="ui primary button submit submit_button">{% trans "Search" %}</button>
  </div>
  <p class="serveice_num_p" {% if results|length == 0 %}style="display:none"{% endif %}>{% trans "Have found " %} <span class="services_num"> {{ results|length }}</span>{% trans " services" %}</p>
  
</div>
<div class="ui three column stackable doubling grid container search_profile">
  {% if results|length == 0 %}
    <h4>No result,please search again!</h4>
  {% endif %}
  {% for result in results %}
    <div class="column">
      <div class="ui segment padding">
        <a href="{{ result.profile_url }}" class="profile_map" style="background-image: url('{{ result.card_image_url }}');">
        </a>
        <a href="{{ result.profile_url }}" class="ui tiny circular image">
          <img  src="{{ result.avatar_url }}" alt="User Avatar">
        </a>
        <div class="ui segment">
          <div class="row"> 
            <div class="ui header">{{ result.username }} {{ result.short_description }}</div>
            <span>{{ result.location }}</span>
          </div>
          <div class="row">
            <table class="ui very basic unstackable compact table">
              <tbody>
                {% for serv in  result.services %}
                <tr>
                  <td><label class="ui {% if serv.searched %} blue {% endif %} label">{{serv.category}}</label></td>
                  <td>{{ serv.title }}</td>
                  <td class="right aligned"><label class="ui label">{{serv.currency}} {{serv.price}}/{{serv.price_type}}</label></td>
                </tr>
                {% endfor %}
              </tbody>
            </table>
          </div>
        </div>
      </div>
    </div>
  {% endfor %}
</div>

<div class="ui grid container more_loaders"{% if results|length <= 21 %} style="display:none" {% endif %}>
  <div class="row">
    <button class="large ui fluid center aligned black button more_loader">加载更多</button>
  </div>
</div>
<br>
{% endblock %}


 