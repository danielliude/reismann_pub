{% extends "core/__global.html" %}
{% load i18n %}
{% load render_bundle from webpack_loader %}

{% block stylesheets %}
  {% render_bundle 'cities/city' 'css' %}
{% endblock %}
{% block javascripts %}
  <script type="text/javascript">
    $.ajaxSetup({
      data: {csrfmiddlewaretoken: '{{ csrf_token }}' },
    });
  </script>
  {% render_bundle 'cities/city' 'js' %}
{% endblock %}

{% block content %}
<!-- <img class="ui fluid image" src="{{ banner_image.url }}"> -->
<div class="city_img" style="background-image: url('{{ banner_image.url }}');"></div>
<div class="ui segment search_form">
  <br>
  <div class="ui doubling grid container">
    <div class="sixteen wide tablet four wide computer column">
      <label><b>{% trans 'Service types' %}</b></label>
    </div>

    <div class="sixteen wide tablet twelve wide computer column">
      <div class="ui three column doubling grid">
        {% for field in form.services %}
        <div class="column">
          <div class="ui secondary segment">
               {{ field }}
          </div>
        </div>
        {% endfor %}
      </div>
    </div>
    <div class="sixteen wide tablet four wide computer column">
      <label><b>{% trans 'Service people' %}</b></label>
    </div>
    <div class="sixteen wide tablet twelve wide computer column">
      <div class="ui grid">
        <div class="eight wide column">
          {{ form.gender }}
        </div>
        <div class="eight wide column">
          {{ form.age }}
        </div>
      </div>
    </div>
    <div class="sixteen wide tablet four wide computer column">
      <label><b>{% trans 'Service cities' %}</b></label>
    </div>
    <div class="sixteen wide tablet twelve wide computer column">
      <div class="ui grid">
        <div class="column">
          {{ form.city }}
        </div>
      </div>
    </div>
    <div class="ui grid hidden_content" style="display: none;">
      <div class="sixteen wide tablet four wide computer column hidden">
        <label><b>{% trans 'Service languages' %}</b></label>
      </div>
      <div class="sixteen wide tablet twelve wide computer column hidden">
        <div class="ui three column doubling grid">
          {% for field in form.languages %}
          <div class="column">
            <div class="ui secondary segment">
                 {{ field }}
            </div>
          </div>
          {% endfor %}
        </div>
      </div>
      <div class="sixteen wide tablet four wide computer column hidden">
        <label><b>{% trans 'Service tags' %}</b></label>
      </div>
      <div class="sixteen wide tablet twelve wide computer column hidden">
        <div class="ui three column doubling grid">
          {% for field in form.tags %}
          <div class="column">
            <div class="ui secondary segment">
                 {{ field }}
            </div>
          </div>
          {% endfor %}
        </div>
      </div>
    </div>
  </div>
  <br>
</div>
<div class="ui grid container search_button">
  <div class="row search_head" style="padding-left: 14px !important;">
    <button class="ui primary button more_select"> {% trans "More options" %}</button>
    <button class="ui primary button submit submit_button">{% trans "Search" %}</button>
  </div>
  <p class="serveice_num_p" {% if services|length == 0 %}style="display:none"{% endif %}>{% trans "Have found " %} <span class="services_num"> {{ services|length }}</span>{% trans " services" %}</p>
  
</div>
<div class="ui three column stackable doubling grid container search_profile">
  {% if services|length == 0 %}
    <h4>No result,please search again!</h4>
  {% endif %}
  {% for service in services %}
    <div class="column">
      <div class="ui segment padding">
        <a href="{% url 'profiles:service_view' service.user.username service.id %}" class="profile_map" style="background-image: url('{{ service.user.profile.get_card_image_url }}');">
        </a>
        <a href="{% url 'profiles:profile' service.user.username %}" class="ui tiny circular image">
          <img  src="{{ service.user.profile.get_avatar_url }}" alt="User Avatar">
        </a>
        <div class="ui segment">
          <div class="row"> 
            <div class="ui header">{{ service.user.profile.get_full_name_or_username }} {{ service.user.profile.short_description }}</div>
            <span>{% for city in service.cities.all %}{% if not forloop.last %}{{ city.name }} , {% else %}{{ city.name }}{% endif %} {% endfor %}</span>
          </div>
          <!-- <div class="ui red header average_price">€ {{ service.price }}</div> -->
          <div class="row content">
            <div class="ui three column padded grid">
              {% for serv in  service.all_service %}
                <div class="row" style="padding:0.3rem 0;">
                  <div class="left floated column" style="padding-left:0px;">
                    <label class="ui {% if serv.active == 'true' %} blue {% endif %} label">{{serv.categorie}}</label>
                  </div>
                  <div class="center aligned column">
                    <span>{{serv.categorie}}</span>
                  </div>
                  <div class="right floated right aligned column" style="padding-right:0px;">
                    <label class="ui label">{{serv.price}}</label>
                  </div>
                </div>
              {% endfor %}

            </div>
          </div>
        </div>
      </div>
    </div>
  {% endfor %}
</div>

<div class="ui grid container more_loaders"{% if services|length <= 21 %} style="display:none" {% endif %}>
  <div class="row">
    <button class="large ui fluid center aligned black button more_loader">加载更多</button>
  </div>
</div>
<br>
{% endblock %}


 